/*
 * Expandable, a jQuery plugin to dynamically group and hide web content
 * Copyright (C) 2009  Marc Diethelm
 * License: (GPL 3, http://www.gnu.org/licenses/gpl-3.0.txt) see license.txt
 */

(function(a){a.fn.expandable=function(){var c;var d={};if(arguments.length==1){c=(arguments[0].constructor==String?arguments[0]:null);d=(arguments[0].constructor==Object?arguments[0]:null)}else{if(arguments.length==2){c=(arguments[0].constructor==String?arguments[0]:null);d=arguments[1]}}if(c=="state"){return a(this).eq(0).data("state")}var b=a.extend({},a.fn.expandable.defaults,d);return this.each(function(){var m=a(this);switch(c){case"destroy":m.removeClass("ui-widget ui-expandable ui-expandable-open");a(".ui-widget-content",this).remove().contents().appendTo(this);if(m.data("elTitle")){a(".ui-widget-header",this).unbind("click").remove();m.prepend(m.data("elTitle"))}return this;case"close":this.closeExpandable(null,b);return this;case"open":this.openExpandable(null,b);return this}m.hide().addClass("ui-expandable ui-widget");var p="";if(a(".ui-expandable-title",this).length>0){var n=a(".ui-expandable-title",this).eq(0).remove();p=n.text();m.data("elTitle",n);delete n}p=b.title||p;if(a(".ui-widget-content",this).length==0){var j='<div class="ui-widget-content ui-helper-clearfix"></div>';if(m.contents().length){m.contents().wrapAll(j)}else{m.html(j)}}var h=a(".ui-widget-content",this);if(b.startopen){m.data("state","open")}else{m.data("state","closed");h.hide()}if(b.uiIconClosed&&b.uiIconOpen){var o=(b.startopen?b.uiIconOpen:b.uiIconClosed);var g=b.uiIconClosed;var f=b.uiIconOpen}else{var o=(b.startopen?"icon-open":"icon-closed");var g="icon-closed";var f="icon-open"}var l="";if(b.extraicon){l="ui-icon "+b.extraicon}var e=a('<div class="ui-state-default ui-widget-header" title="'+b.tooltip+'">	<div class="ui-expandable-icon ui-icon '+o+'"></div>	<div class="ui-expandable-title">'+p+'</div>	<div class="ui-expandable-extraicon"><span class="'+l+'"></span></div></div>');a(".ui-widget-header",this).length?a(".ui-widget-header",this).replaceWith(e):m.prepend(e);m.show();a(".ui-icon",e).each(function(){var q,r=0;if(e.innerHeight()>0){var s=e.innerHeight()-a(this).height();q=Math.floor((s/2));var r=s-q}else{if(b.iconMarginTop){q=b.iconMarginTop;r=b.iconMarginBottom||0}}if(q>0){a(this).css({"margin-top":q,"margin-bottom":r})}});var k=this;e.bind("click",null,function(q){var r=m.data("state");if(b.headerClick){if(b.headerClick.call(k,q,b)===false){return false}}if(r=="closed"||r=="closing"){k.openExpandable.call(k,q,b)}else{k.closeExpandable.call(k,q,b)}return true});this.closeExpandable=function(q,r){a(".ui-expandable-icon",e).removeClass(f).addClass(g);m.data("state","closing");if(r.closing){r.closing.call(this,q,r)}-h.animate(r.animationClose,r.duration,r.easing,function(){m.data("state","closed");if(r.closed){r.closed.call(k,q,r)}})};this.openExpandable=function(q,r){a(".ui-expandable-icon",e).removeClass(g).addClass(f);m.data("state","opening");if(r.opening){r.opening.call(this,q,r)}-h.animate(r.animationOpen,r.duration,r.easing,function(){m.data("state","open");if(r.open){r.open.call(k,q,r)}})};if(b.headerHover){e.hover(function(q){return b.headerHover.call(e,true,q,b)},function(q){return b.headerHover.call(e,false,q,b)})}if(b.extraiconClick){a(".ui-expandable-extraicon",this).click(function(q){return b.extraiconClick.call(k,q,b)})}if(b.extraiconHover){var i=a(".ui-expandable-extraicon",k);i.hover(function(q){return b.extraiconHover.call(i.get(0),true,q,b)},function(q){return b.extraiconHover.call(i.get(0),false,q,b)})}return this})};a.fn.expandable.defaults={startopen:false,title:null,tooltip:"Click to expand",uiIconClosed:"ui-icon-triangle-1-e",uiIconOpen:"ui-icon-triangle-1-s",animationClose:{height:"hide"},animationOpen:{height:"show"},duration:"normal",easing:"swing",open:null,closed:null,opening:null,closing:null,headerClick:null,headerHover:function(c,b){if(c){a(this).removeClass("ui-state-default").addClass("ui-state-hover")}else{a(this).removeClass("ui-state-hover").addClass("ui-state-default")}},extraicon:null,extraiconClick:null,extraiconHover:null,extraiconHover:function(d,c,b){if(d){a(this).addClass("ui-state-hover")}else{a(this).removeClass("ui-state-hover")}},iconMarginTop:null,iconMarginBottom:null}})(jQuery);
